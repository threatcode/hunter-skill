{
  "id": "network_services_pentesting_16d6108a64f4",
  "category": "network-services-pentesting",
  "title": "nginx",
  "description": "# Nginx\n\n{{#include ../../banners/hacktricks-training.md}}\n\n\n## Missing root location <a href=\"#missing-root-location\" id=\"missing-root-location\"></a>\n\nWhen configuring the Nginx server, the **root directive** plays a critical role by defining the base directory from which files are served. Consider the example below:\n\n```bash\nserver {\n        root /etc/nginx;\n\n        location /hello.txt {\n                try_files $uri $uri/ =404;\n                proxy_pass http://127.0.0.1:8080/;\n        }\n}\n",
  "payloads": [
    "# Nginx",
    "{{#include ../../banners/hacktricks-training.md}}",
    "## Missing root location <a href=\"#missing-root-location\" id=\"missing-root-location\"></a>",
    "When configuring the Nginx server, the **root directive** plays a critical role by defining the base directory from which files are served. Consider the example below:",
    "```bash",
    "server {",
    "root /etc/nginx;",
    "location /hello.txt {",
    "try_files $uri $uri/ =404;",
    "proxy_pass http://127.0.0.1:8080/;",
    "In this configuration, `/etc/nginx` is designated as the root directory. This setup allows access to files within the specified root directory, such as `/hello.txt`. However, it's crucial to note that only a specific location (`/hello.txt`) is defined. There's no configuration for the root location (`location / {...}`). This omission means that the root directive applies globally, enabling requests to the root path `/` to access files under `/etc/nginx`.",
    "A critical security consideration arises from this configuration. A simple `GET` request, like `GET /nginx.conf`, could expose sensitive information by serving the Nginx configuration file located at `/etc/nginx/nginx.conf`. Setting the root to a less sensitive directory, like `/etc`, could mitigate this risk, yet it still may allow unintended access to other critical files, including other configuration files, access logs, and even encrypted credentials used for HTTP basic authentication.",
    "## Alias LFI Misconfiguration <a href=\"#alias-lfi-misconfiguration\" id=\"alias-lfi-misconfiguration\"></a>",
    "In the configuration files of Nginx, a close inspection is warranted for the \"location\" directives. A vulnerability known as Local File Inclusion (LFI) can be inadvertently introduced through a configuration that resembles the following:",
    "location /imgs {"
  ],
  "source": "HackTricks",
  "references": [
    "/workspaces/hunter-skill/hacktricks/src/network-services-pentesting/pentesting-web/nginx.md"
  ]
}