{
  "id": "mobile_pentesting_18da0ba7cd23",
  "category": "mobile-pentesting",
  "title": "make apk accept ca certificate",
  "description": "# Make APK accept CA certificate\n\n{{#include ../../banners/hacktricks-training.md}}\n\nSome applications don't like user downloaded certificates, so in order to inspect web traffic for some apps we actually have to decompile the application & add a few things & recompile it.\n\n## Automatic\n\nThe tool [**https://github.com/shroudedcode/apk-mitm**](https://github.com/shroudedcode/apk-mitm) will **automatically** make the necessary changes to the application to start capturing the requests and will als",
  "payloads": [
    "# Make APK accept CA certificate",
    "{{#include ../../banners/hacktricks-training.md}}",
    "Some applications don't like user downloaded certificates, so in order to inspect web traffic for some apps we actually have to decompile the application & add a few things & recompile it.",
    "## Automatic",
    "The tool [**https://github.com/shroudedcode/apk-mitm**](https://github.com/shroudedcode/apk-mitm) will **automatically** make the necessary changes to the application to start capturing the requests and will also disable certificate pinning (if any).",
    "## Manual",
    "First we decompile the app: `apktool d *file-name*.apk`",
    "![](../../images/img9.png)",
    "Then we go into the **Manifest.xml** file & scroll down to the `<\\application android>` tag & we are going to add the following line if it isn't already there:",
    "`android:networkSecurityConfig=\"@xml/network_security_config\"`",
    "Before adding:",
    "![](../../images/img10.png)",
    "After adding:",
    "![](../../images/img11.png)",
    "Now go into the **res/xml** folder & create/modify a file named network_security_config.xml with the following contents:"
  ],
  "source": "HackTricks",
  "references": [
    "/workspaces/hunter-skill/hacktricks/src/mobile-pentesting/android-app-pentesting/make-apk-accept-ca-certificate.md"
  ]
}