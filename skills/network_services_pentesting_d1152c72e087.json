{
  "id": "network_services_pentesting_d1152c72e087",
  "category": "network-services-pentesting",
  "title": "rpcclient enumeration",
  "description": "# rpcclient enumeration\n\n{{#include ../../banners/hacktricks-training.md}}\n\n\n### Overview of Relative Identifiers (RID) and Security Identifiers (SID)\n\n**Relative Identifiers (RID)** and **Security Identifiers (SID)** are key components in Windows operating systems for uniquely identifying and managing objects, such as users and groups, within a network domain.\n\n- **SIDs** serve as unique identifiers for domains, ensuring that each domain is distinguishable.\n- **RIDs** are appended to SIDs to cr",
  "payloads": [
    "# rpcclient enumeration",
    "{{#include ../../banners/hacktricks-training.md}}",
    "### Overview of Relative Identifiers (RID) and Security Identifiers (SID)",
    "**Relative Identifiers (RID)** and **Security Identifiers (SID)** are key components in Windows operating systems for uniquely identifying and managing objects, such as users and groups, within a network domain.",
    "- **SIDs** serve as unique identifiers for domains, ensuring that each domain is distinguishable.",
    "- **RIDs** are appended to SIDs to create unique identifiers for objects within those domains. This combination allows for precise tracking and management of object permissions and access controls.",
    "For instance, a user named `pepe` might have a unique identifier combining the domain's SID with his specific RID, represented in both hexadecimal (`0x457`) and decimal (`1111`) formats. This results in a complete and unique identifier for pepe within the domain like: `S-1-5-21-1074507654-1937615267-42093643874-1111`.",
    "### **Enumeration with rpcclient**",
    "The **`rpcclient`** utility from Samba is utilized for interacting with **RPC endpoints through named pipes**. Below commands that can be issued to the SAMR, LSARPC, and LSARPC-DS interfaces after a **SMB session is established**, often necessitating credentials.",
    "#### Server Information",
    "- To obtain **Server Information**: `srvinfo` command is used.",
    "#### Enumeration of Users",
    "- **Users can be listed** using: `querydispinfo` and `enumdomusers`.",
    "- **Details of a user** by: `queryuser <0xrid>`.",
    "- **Groups of a user** with: `queryusergroups <0xrid>`."
  ],
  "source": "HackTricks",
  "references": [
    "/workspaces/hunter-skill/hacktricks/src/network-services-pentesting/pentesting-smb/rpcclient-enumeration.md"
  ]
}