{
  "id": "macos_hardening_758f653ca716",
  "category": "macos-hardening",
  "title": "macos memory dumping",
  "description": "# macOS Memory Dumping\n\n{{#include ../../../banners/hacktricks-training.md}}\n\n## Memory Artifacts\n\n### Swap Files\n\nSwap files, such as `/private/var/vm/swapfile0`, serve as **caches when the physical memory is full**. When there's no more room in physical memory, its data is transferred to a swap file and then brought back to physical memory as needed. Multiple swap files might be present, with names like swapfile0, swapfile1, and so on.\n\n### Hibernate Image\n\nThe file located at `/private/var/vm",
  "payloads": [
    "# macOS Memory Dumping",
    "{{#include ../../../banners/hacktricks-training.md}}",
    "## Memory Artifacts",
    "### Swap Files",
    "Swap files, such as `/private/var/vm/swapfile0`, serve as **caches when the physical memory is full**. When there's no more room in physical memory, its data is transferred to a swap file and then brought back to physical memory as needed. Multiple swap files might be present, with names like swapfile0, swapfile1, and so on.",
    "### Hibernate Image",
    "The file located at `/private/var/vm/sleepimage` is crucial during **hibernation mode**. **Data from memory is stored in this file when OS X hibernates**. Upon waking the computer, the system retrieves memory data from this file, allowing the user to continue where they left off.",
    "It's worth noting that on modern MacOS systems, this file is typically encrypted for security reasons, making recovery difficult.",
    "- To check if encryption is enabled for the sleepimage, the command `sysctl vm.swapusage` can be run. This will show if the file is encrypted.",
    "### Memory Pressure Logs",
    "Another important memory-related file in MacOS systems is the **memory pressure log**. These logs are located in `/var/log` and contain detailed information about the system's memory usage and pressure events. They can be particularly useful for diagnosing memory-related issues or understanding how the system manages memory over time.",
    "## Dumping memory with osxpmem",
    "In order to dump the memory in a MacOS machine you can use [**osxpmem**](https://github.com/google/rekall/releases/download/v1.5.1/osxpmem-2.1.post4.zip).",
    "**Note**: The following instructions will only work for Macs with Intel architecture. This tool is now archived and the last release was in 2017. The binary downloaded using the instructions below targets Intel chips as Apple Silicon wasn't around in 2017. It may be possible to compile the binary for arm64 architecture but you'll have to try for yourself.",
    "```bash"
  ],
  "source": "HackTricks",
  "references": [
    "/workspaces/hunter-skill/hacktricks/src/macos-hardening/macos-security-and-privilege-escalation/macos-files-folders-and-binaries/macos-memory-dumping.md"
  ]
}