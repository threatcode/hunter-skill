{
  "id": "mobile_pentesting_dfd3da92fa63",
  "category": "mobile-pentesting",
  "title": "ios pentesting without jailbreak",
  "description": "# iOS Pentesting without Jailbreak\n\n{{#include ../../banners/hacktricks-training.md}}\n\n## Main idea\n\nApplications signed with the **entitlement `get_task_allow`** allow third party applications to run a function called **`task_for_pid()`** with the process ID of the initial application as argument in order to get the task port over it (be able to control it and access it's memory).\n\nHowever, it\u2019s not as easy as just pulling the IPA, re-signing it with the entitlement, and flashing it back to you",
  "payloads": [
    "# iOS Pentesting without Jailbreak",
    "{{#include ../../banners/hacktricks-training.md}}",
    "## Main idea",
    "Applications signed with the **entitlement `get_task_allow`** allow third party applications to run a function called **`task_for_pid()`** with the process ID of the initial application as argument in order to get the task port over it (be able to control it and access it's memory).",
    "However, it\u2019s not as easy as just pulling the IPA, re-signing it with the entitlement, and flashing it back to your device. This is becasue of FairPlay protection. When the signature of the app changes, the DRM (Digital Rights Management) key is **invalidated and the app won't work**.",
    "With an old jailbroken device, it's possible to install the IPA, **decrypt it using your favourite tool** (such as Iridium or frida-ios-dump), and pulling it back off the device. Although, if possible, it's recommended to just as the client for the decrypted IPA.",
    "## Obtain decrypted IPA",
    "### Get it from Apple",
    "1. Install the app to pentest in the iPhone",
    "2. Install and launch [Apple Configurator](https://apps.apple.com/au/app/apple-configurator/id1037126344?mt=12) inside your macos",
    "3. Open `Terminal `on your Mac, and cd to `/Users/[username]/Library/Group\\\\ Containers/K36BKF7T3D.group.com.apple.configurator/Library/Caches/Assets/TemporaryItems/MobileApps`. The IPA will appear in this folder later.",
    "4. You should see your iOS device. Double-click on it, and then click Add + \u2192 Apps from the top menu bar.",
    "5. After clicking Add, Configurator will download the IPA from Apple, and attempt to push it to your device. If you followed my recommendation earlier and installed the IPA already, a prompt asking you to reinstall the app will appear.",
    "6. The IPA should be downloaded inside `/Users/[username]/Library/Group\\\\ Containers/K36BKF7T3D.group.com.apple.configurator/Library/Caches/Assets/TemporaryItems/MobileApps`from where you can grab it",
    "Check [https://dvuln.com/blog/modern-ios-pentesting-no-jailbreak-needed](https://dvuln.com/blog/modern-ios-pentesting-no-jailbreak-needed) for more detailed information about this process."
  ],
  "source": "HackTricks",
  "references": [
    "/workspaces/hunter-skill/hacktricks/src/mobile-pentesting/ios-pentesting/ios-pentesting-without-jailbreak.md"
  ]
}